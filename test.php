<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #e0f2fe 0%, #e8f5e8 100%); }
        .room-available { background: linear-gradient(135deg, #4ade80, #22c55e); }
        .room-booked { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .btn-primary { background: linear-gradient(135deg, #06b6d4, #0891b2); }
        .btn-primary:hover { background: linear-gradient(135deg, #0891b2, #0e7490); }
        .admin-bg { background: linear-gradient(135deg, #1e293b, #334155); }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h3>
                    <button onclick="closeAdminLogin()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <form id="adminLoginForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="adminUsername" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="admin">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="adminPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="password">
                    </div>
                    <button type="submit" class="w-full px-6 py-3 btn-primary text-white rounded-lg transition-colors">
                        ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">
                ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏û‡∏¥‡∏ò‡∏µ‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ö‡∏±‡∏ï‡∏£‡πÅ‡∏Å‡πà‡∏ú‡∏π‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤
            </h1>
            <h2 class="text-xl md:text-2xl font-semibold text-teal-700">
                ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ 2567 ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 29 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô ‡∏û.‡∏®. 2567
            </h2>
        </div>

        <!-- Navigation -->
        <div class="flex justify-center mb-8">
            <div class="bg-white rounded-lg shadow-lg p-2 flex flex-wrap space-x-2">
                <button onclick="showPage('booking')" id="bookingTab" class="px-6 py-3 rounded-lg btn-primary text-white font-medium transition-all">
                    ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
                </button>
                <button onclick="showPage('myBookings')" id="myBookingsTab" class="px-6 py-3 rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300">
                    ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                </button>
                <button onclick="openAdminLogin()" id="adminTab" class="px-6 py-3 rounded-lg bg-slate-600 text-white font-medium transition-all hover:bg-slate-700">
                    üîê ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                </button>
            </div>
        </div>

        <!-- Booking Page -->
        <div id="bookingPage" class="space-y-8">
            <!-- Room Rates Image -->
            <div class="flex justify-center mb-6">
                <img src="rmutto.jpg" alt="‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏î‡∏•‡∏°" width="600" class="rounded-xl shadow-lg max-w-full h-auto" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="bg-gradient-to-r from-teal-100 to-blue-100 p-8 rounded-xl shadow-lg max-w-2xl text-center" style="display: none;">
                    <div class="text-4xl mb-4">üè®</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-4">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h3>
                    <div class="space-y-3 text-left">
                        <div style="text-align: center;">
                        <img src="rmutto.eec.jpg" alt="‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏î‡∏•‡∏°" width="600">
                        </div>
                        <div class="flex justify-between items-center bg-white p-3 rounded-lg">
                            <span class="font-medium">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏î‡∏•‡∏° (1‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 4 ‡∏ó‡πà‡∏≤‡∏ô)</span>
                            <span class="text-teal-600 font-bold">600 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-3 rounded-lg">
                            <span class="font-medium">‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏î‡∏≠‡∏Å‡∏•‡∏∞ 100 ‡∏ö‡∏≤‡∏ó</span>
                            <span class="text-teal-600 font-bold">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å </span>
                        </div>
                         <div class="flex justify-between items-center bg-white p-3 rounded-lg">
                            <span class="font-medium">‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤</span>
                            <span class="text-teal-600 font-bold"> 08.30-18.00 ‡∏ô. </span>
                        </div>

                        <div class="text-sm text-gray-600 mt-4 bg-yellow-50 p-3 rounded-lg">
                            <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡πÇ‡∏ó‡∏£ 065-461-5354 ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏∏‡∏ì‡∏ì‡∏†‡∏≤ ‡πÄ‡∏´‡∏•‡∏∑‡πà‡∏≠‡∏°‡∏•‡πâ‡∏≥  
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Calendar Selection -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="calendar-day p-4 border-2 border-teal-200 rounded-lg cursor-pointer hover:border-teal-400 transition-all" onclick="selectDate('2024-11-03')">
                        <div class="text-center">
                            <div class="text-lg font-semibold text-gray-800">3 ‡∏û.‡∏¢. 68</div>
                            <div class="text-sm text-gray-600">‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</div>
                        </div>
                    </div>
                    <div class="calendar-day p-4 border-2 border-teal-200 rounded-lg cursor-pointer hover:border-teal-400 transition-all" onclick="selectDate('2024-11-04')">
                        <div class="text-center">
                            <div class="text-lg font-semibold text-gray-800">4 ‡∏û.‡∏¢. 68</div>
                            <div class="text-sm text-gray-600">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</div>
                        </div>
                    </div>
                    <div class="calendar-day p-4 border-2 border-teal-200 rounded-lg cursor-pointer hover:border-teal-400 transition-all" onclick="selectDate('2024-11-05')">
                        <div class="text-center">
                            <div class="text-lg font-semibold text-gray-800">5 ‡∏û.‡∏¢. 68</div>
                            <div class="text-sm text-gray-600">‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</div>
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="allDaysCheckbox" class="w-4 h-4 text-teal-600">
                        <span class="text-gray-700">‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ß‡∏±‡∏ô (3-5 ‡∏û.‡∏¢. 68)</span>
                    </label>
                </div>
            </div>

            <!-- Room Grid -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h3>
                <div id="roomGrid" class="grid grid-cols-2 md:grid-cols-5 lg:grid-cols-6 gap-3">
                    <!-- Rooms will be generated by JavaScript -->
                </div>
                <div class="mt-4 flex items-center space-x-6">
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 room-available rounded"></div>
                        <span class="text-sm text-gray-600">‡∏ß‡πà‡∏≤‡∏á</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 room-booked rounded"></div>
                        <span class="text-sm text-gray-600">‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>
                    </div>
                </div>
            </div>

            <!-- System Closed Message -->
            <div id="systemClosed" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg hidden">
                <strong>‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢!</strong> ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ
            </div>
        </div>

        <!-- My Bookings Page -->
        <div id="myBookingsPage" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
                <div id="bookingsList" class="space-y-4">
                    <!-- Bookings will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="adminPage" class="hidden">
            <div class="admin-bg rounded-xl shadow-lg p-6 text-white mb-6">
                <div class="flex justify-between items-center">
                    <h3 class="text-2xl font-semibold">üõ†Ô∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h3>
                    <button onclick="logoutAdmin()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
            </div>

            <!-- Admin Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-teal-600" id="totalBookings">0</div>
                    <div class="text-gray-600">‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-green-600" id="totalGuests">0</div>
                    <div class="text-gray-600">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-blue-600" id="bookedRooms">0</div>
                    <div class="text-gray-600">‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-orange-600" id="availableRooms">30</div>
                    <div class="text-gray-600">‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á</div>
                </div>
            </div>

            <!-- Admin Controls -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h4 class="text-lg font-semibold text-gray-800 mb-4">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h4>
                <div class="flex flex-wrap gap-4">
                    <button onclick="exportBookings()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                        üìä ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    </button>
                    <button onclick="clearAllBookings()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                        üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                    <button onclick="showRoomStatus()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        üè† ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
                    </button>
                </div>
            </div>

            <!-- Bookings Management -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h4 class="text-lg font-semibold text-gray-800">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h4>
                    <div class="flex space-x-2">
                        <select id="filterDate" class="px-3 py-2 border border-gray-300 rounded-lg" onchange="filterBookings()">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</option>
                            <option value="2024-11-03">3 ‡∏û.‡∏¢. 68</option>
                            <option value="2024-11-04">4 ‡∏û.‡∏¢. 68</option>
                            <option value="2024-11-05">5 ‡∏û.‡∏¢. 68</option>
                        </select>
                        <select id="filterFaculty" class="px-3 py-2 border border-gray-300 rounded-lg" onchange="filterBookings()">
                            <option value="">‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ì‡∏∞</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                            <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option>
                        </select>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏´‡πâ‡∏≠‡∏á</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏Ñ‡∏ì‡∏∞</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ & ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody id="adminBookingsTable" class="divide-y divide-gray-200">
                            <!-- Admin bookings will be displayed here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h3>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="bookingForm" class="space-y-6">
                    <div id="selectedRoomInfo" class="bg-teal-50 p-4 rounded-lg mb-6"></div>

                    <!-- Number of Guests -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 4 ‡∏ó‡πà‡∏≤‡∏ô)</label>
                        <select id="guestCount" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" onchange="updateGuestForms()">
                            <option value="1">1 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="2">2 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="3">3 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="4">4 ‡∏ó‡πà‡∏≤‡∏ô</option>
                        </select>
                    </div>

                    <!-- Guest Forms Container -->
                    <div id="guestFormsContainer"></div>

                    <!-- Booker Information -->
                    <div class="border-t pt-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï</label>
                                <select id="campus" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô</option>
                                    <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ì‡∏∞</label>
                                <select id="faculty" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®</option>
                                    <option value="‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°</option>
                                    <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®">‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                </select>
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            <input type="tel" id="phone" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
                        </div>
                    </div>

                    <!-- Payment Information -->
                    <div class="border-t pt-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h4>
                        <div id="paymentAmountInfo" class="bg-orange-50 p-4 rounded-lg mb-4 border border-orange-200">
                            <h5 class="font-semibold text-orange-800 mb-2">üí∞ ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞</h5>
                            <div class="text-orange-700">
                                <p>‡∏´‡πâ‡∏≠‡∏á <span id="paymentRoomNumber"></span> √ó <span id="paymentNights"></span> ‡∏Ñ‡∏∑‡∏ô √ó 600 ‡∏ö‡∏≤‡∏ó</p>
                                <div class="text-xl font-bold text-orange-800 mt-2">
                                    ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="paymentTotalAmount"></span> ‡∏ö‡∏≤‡∏ó
                                </div>
                            </div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <h5 class="font-semibold text-blue-800 mb-2">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á</h5>
                            <p class="text-blue-700">
                                <strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢:</strong> 208-0-55482-4<br>
                                <strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå(‡∏™‡∏°‡∏ó‡∏ö‡∏Å‡∏•‡∏≤‡∏á)<br>
                                ‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏£‡∏≤‡∏ä‡∏°‡∏á‡∏Ñ‡∏•‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏≠‡∏≠‡∏Å
                            </p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
                            <input type="file" id="paymentSlip" accept="image/*" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" onchange="previewPaymentSlip(this)">
                            <div id="paymentPreview" class="mt-2 hidden">
                                <img id="previewImage" class="max-w-xs max-h-48 rounded-lg border" alt="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏•‡∏¥‡∏õ">
                            </div>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-6">
                        <button type="button" onclick="closeModal()" class="flex-1 px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                        <button type="submit" class="flex-1 px-6 py-3 btn-primary text-white rounded-lg transition-colors">
                            ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Booking Detail Modal -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
                    <button onclick="closeDetailModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="detailContent"></div>
            </div>
        </div>
    </div>

    <!-- Room Status Modal -->
    <div id="roomStatusModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å</h3>
                    <button onclick="closeRoomStatusModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="roomStatusContent"></div>
            </div>
        </div>
    </div>

    <!-- Edit Booking Modal -->
    <div id="editBookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h3>
                    <button onclick="closeEditModal()" class="text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <form id="editBookingForm" class="space-y-6">
                    <input type="hidden" id="editBookingId">
                    
                    <div id="editSelectedRoomInfo" class="bg-teal-50 p-4 rounded-lg mb-6"></div>

                    <!-- Number of Guests -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 4 ‡∏ó‡πà‡∏≤‡∏ô)</label>
                        <select id="editGuestCount" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" onchange="updateEditGuestForms()">
                            <option value="1">1 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="2">2 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="3">3 ‡∏ó‡πà‡∏≤‡∏ô</option>
                            <option value="4">4 ‡∏ó‡πà‡∏≤‡∏ô</option>
                        </select>
                    </div>

                    <!-- Guest Forms Container -->
                    <div id="editGuestFormsContainer"></div>

                    <!-- Booker Information -->
                    <div class="border-t pt-6">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï</label>
                                <select id="editCampus" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏û‡∏£‡∏∞</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏Å‡∏£‡∏û‡∏á‡∏©‡∏†‡∏π‡∏ß‡∏ô‡∏≤‡∏£‡∏ñ</option>
                                    <option value="‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô">‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡πÄ‡∏ó‡∏ô</option>
                                    <option value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ì‡∏∞</label>
                                <select id="editFaculty" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ì‡∏∞</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏™‡∏±‡∏ï‡∏ß‡πÅ‡∏û‡∏ó‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏ß‡∏Å‡∏≤‡∏®</option>
                                    <option value="‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°</option>
                                    <option value="‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®">‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°">‡∏Ñ‡∏ì‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏±‡∏á‡∏Ñ‡∏°</option>
                                    <option value="‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">‡∏Ñ‡∏ì‡∏∞‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</option>
                                </select>
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            <input type="tel" id="editPhone" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå">
                        </div>

                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</label>
                            <select id="editStatus" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                <option value="‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</option>
                                <option value="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex space-x-4 pt-6">
                        <button type="button" onclick="closeEditModal()" class="flex-1 px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                        <button type="submit" class="flex-1 px-6 py-3 btn-primary text-white rounded-lg transition-colors">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-4">
        <div class="relative max-w-4xl max-h-[90vh]">
            <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <img id="fullImage" class="max-w-full max-h-full rounded-lg" alt="‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô">
        </div>
    </div>

    <script>
        // Global variables
        let selectedDates = [];
        let selectedRoom = null;
        let bookings = JSON.parse(localStorage.getItem('dormBookings')) || [];
        let roomStatus = JSON.parse(localStorage.getItem('roomStatus')) || {};
        let isAdminLoggedIn = false;

        // Initialize room status for all dates if not exists
        const availableDates = ['2024-11-03', '2024-11-04', '2024-11-05'];
        availableDates.forEach(date => {
            if (!roomStatus[date]) {
                roomStatus[date] = {};
                for (let i = 1; i <= 30; i++) {
                    roomStatus[date][i] = 'available';
                }
            }
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            generateRoomGrid();
            updateMyBookings();
            
            // Handle all days checkbox
            document.getElementById('allDaysCheckbox').addEventListener('change', function() {
                if (this.checked) {
                    selectedDates = [...availableDates];
                    updateCalendarSelection();
                } else {
                    selectedDates = [];
                    updateCalendarSelection();
                }
                generateRoomGrid();
            });

            // Admin login form
            const adminLoginForm = document.getElementById('adminLoginForm');
            if (adminLoginForm) {
                adminLoginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const username = document.getElementById('adminUsername').value.trim();
                    const password = document.getElementById('adminPassword').value.trim();
                    
                    console.log('Login attempt:', username, password); // Debug log
                    
                    if (username === 'admin' && password === 'admin123') {
                        isAdminLoggedIn = true;
                        closeAdminLogin();
                        showPage('admin');
                        updateAdminStats();
                        updateAdminBookingsTable();
                        alert('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                    } else {
                        alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                    }
                });
            }
        });

        function showPage(page) {
            const bookingPage = document.getElementById('bookingPage');
            const myBookingsPage = document.getElementById('myBookingsPage');
            const adminPage = document.getElementById('adminPage');
            const bookingTab = document.getElementById('bookingTab');
            const myBookingsTab = document.getElementById('myBookingsTab');

            // Hide all pages
            bookingPage.classList.add('hidden');
            myBookingsPage.classList.add('hidden');
            adminPage.classList.add('hidden');

            // Reset tab styles
            bookingTab.className = 'px-6 py-3 rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300';
            myBookingsTab.className = 'px-6 py-3 rounded-lg bg-gray-200 text-gray-700 font-medium transition-all hover:bg-gray-300';

            if (page === 'booking') {
                bookingPage.classList.remove('hidden');
                bookingTab.className = 'px-6 py-3 rounded-lg btn-primary text-white font-medium transition-all';
            } else if (page === 'myBookings') {
                myBookingsPage.classList.remove('hidden');
                myBookingsTab.className = 'px-6 py-3 rounded-lg btn-primary text-white font-medium transition-all';
                updateMyBookings();
            } else if (page === 'admin' && isAdminLoggedIn) {
                adminPage.classList.remove('hidden');
                updateAdminStats();
                updateAdminBookingsTable();
            }
        }

        // Admin functions
        function openAdminLogin() {
            if (isAdminLoggedIn) {
                showPage('admin');
                return;
            }
            const modal = document.getElementById('adminLoginModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeAdminLogin() {
            const modal = document.getElementById('adminLoginModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function logoutAdmin() {
            isAdminLoggedIn = false;
            showPage('booking');
        }

        function updateAdminStats() {
            const totalBookings = bookings.length;
            const totalGuests = bookings.reduce((sum, booking) => sum + booking.guests.length, 0);
            
            let bookedRoomsCount = 0;
            availableDates.forEach(date => {
                if (roomStatus[date]) {
                    for (let i = 1; i <= 30; i++) {
                        if (roomStatus[date][i] === 'booked') {
                            bookedRoomsCount++;
                            break; // Count each room only once even if booked multiple days
                        }
                    }
                }
            });

            document.getElementById('totalBookings').textContent = totalBookings;
            document.getElementById('totalGuests').textContent = totalGuests;
            document.getElementById('bookedRooms').textContent = bookedRoomsCount;
            document.getElementById('availableRooms').textContent = 30 - bookedRoomsCount;
        }

        function updateAdminBookingsTable() {
            const tbody = document.getElementById('adminBookingsTable');
            tbody.innerHTML = '';

            let filteredBookings = [...bookings];
            
            // Apply filters
            const filterDate = document.getElementById('filterDate').value;
            const filterFaculty = document.getElementById('filterFaculty').value;

            if (filterDate) {
                filteredBookings = filteredBookings.filter(booking => 
                    booking.dates.includes(filterDate)
                );
            }

            if (filterFaculty) {
                filteredBookings = filteredBookings.filter(booking => 
                    booking.faculty === filterFaculty
                );
            }

            filteredBookings.forEach(booking => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const dateText = booking.dates.map(date => {
                    const d = new Date(date);
                    return d.toLocaleDateString('th-TH', { 
                        day: 'numeric', 
                        month: 'short'
                    });
                }).join(', ');

                const statusColor = booking.status === '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á' ? 'text-orange-600' : 'text-green-600';
                
                row.innerHTML = `
                    <td class="px-4 py-3 text-sm text-gray-900">${booking.room}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${booking.guests[0].name}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${dateText}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${booking.faculty}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${booking.guests.length}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${booking.phone}</td>
                    <td class="px-4 py-3 text-sm">
                        <div class="mb-2">
                            <span class="px-2 py-1 text-xs rounded-full ${statusColor} bg-opacity-20">${booking.status}</span>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="showBookingDetail(${booking.id})" class="px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600">
                                ‡∏î‡∏π
                            </button>
                            <button onclick="editBooking(${booking.id})" class="px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600">
                                ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                            </button>
                            ${booking.status === '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á' ? 
                                `<button onclick="confirmBooking(${booking.id})" class="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">
                                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                                </button>` : ''
                            }
                            <button onclick="deleteBooking(${booking.id})" class="px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">
                                ‡∏•‡∏ö
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });

            if (filteredBookings.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="px-4 py-8 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</td></tr>';
            }
        }

        function filterBookings() {
            updateAdminBookingsTable();
        }

        function deleteBooking(bookingId) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?')) return;

            const bookingIndex = bookings.findIndex(b => b.id === bookingId);
            if (bookingIndex === -1) return;

            const booking = bookings[bookingIndex];
            
            // Free up the room
            booking.dates.forEach(date => {
                if (roomStatus[date]) {
                    roomStatus[date][booking.room] = 'available';
                }
            });

            // Remove booking
            bookings.splice(bookingIndex, 1);
            
            // Save to localStorage
            localStorage.setItem('dormBookings', JSON.stringify(bookings));
            localStorage.setItem('roomStatus', JSON.stringify(roomStatus));

            // Update displays
            updateAdminStats();
            updateAdminBookingsTable();
            generateRoomGrid();
            
            alert('‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        function exportBookings() {
            if (bookings.length === 0) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å');
                return;
            }

            let csvContent = '‡∏´‡πâ‡∏≠‡∏á,‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á,‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤,‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà,‡∏Ñ‡∏ì‡∏∞,‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà,‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô,‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£,‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á\n';
            
            bookings.forEach(booking => {
                const dateText = booking.dates.join(' | ');
                csvContent += `${booking.room},"${booking.guests[0].name}","${booking.guests[0].studentId}","${dateText}","${booking.faculty}","${booking.campus}",${booking.guests.length},"${booking.phone}","${booking.bookingDate}"\n`;
            });

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'booking_data.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function clearAllBookings() {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ')) return;
            
            bookings = [];
            roomStatus = {};
            
            // Reset room status
            availableDates.forEach(date => {
                roomStatus[date] = {};
                for (let i = 1; i <= 30; i++) {
                    roomStatus[date][i] = 'available';
                }
            });

            localStorage.setItem('dormBookings', JSON.stringify(bookings));
            localStorage.setItem('roomStatus', JSON.stringify(roomStatus));

            updateAdminStats();
            updateAdminBookingsTable();
            generateRoomGrid();
            updateMyBookings();
            
            alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        function showRoomStatus() {
            const modal = document.getElementById('roomStatusModal');
            const content = document.getElementById('roomStatusContent');
            
            let html = '';
            availableDates.forEach(date => {
                const d = new Date(date);
                const dateText = d.toLocaleDateString('th-TH', { 
                    day: 'numeric', 
                    month: 'long', 
                    year: 'numeric' 
                });
                
                html += `<div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-3">${dateText}</h4>
                    <div class="grid grid-cols-6 gap-2">`;
                
                for (let i = 1; i <= 30; i++) {
                    const status = roomStatus[date] && roomStatus[date][i] === 'booked' ? 'booked' : 'available';
                    const statusClass = status === 'available' ? 'room-available' : 'room-booked';
                    const statusText = status === 'available' ? '‚úÖ ‡∏ß‡πà‡∏≤‡∏á' : '‚ùå ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß';
                    
                    html += `<div class="${statusClass} text-white p-2 rounded text-center text-sm">
                        <div>‡∏´‡πâ‡∏≠‡∏á ${i}</div>
                        <div class="text-xs">${statusText}</div>
                    </div>`;
                }
                
                html += '</div></div>';
            });
            
            content.innerHTML = html;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeRoomStatusModal() {
            const modal = document.getElementById('roomStatusModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function previewPaymentSlip(input) {
            const preview = document.getElementById('paymentPreview');
            const previewImage = document.getElementById('previewImage');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            } else {
                preview.classList.add('hidden');
            }
        }

        function showFullImage(imageSrc) {
            const modal = document.getElementById('imageModal');
            const fullImage = document.getElementById('fullImage');
            
            fullImage.src = imageSrc;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function confirmBooking(bookingId) {
            if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?')) return;

            const bookingIndex = bookings.findIndex(b => b.id === bookingId);
            if (bookingIndex === -1) return;

            bookings[bookingIndex].status = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á';
            localStorage.setItem('dormBookings', JSON.stringify(bookings));

            updateAdminStats();
            updateAdminBookingsTable();
            updateMyBookings();
            
            alert('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        function editBooking(bookingId) {
            const booking = bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const modal = document.getElementById('editBookingModal');
            const roomInfo = document.getElementById('editSelectedRoomInfo');
            
            const dateText = booking.dates.map(date => {
                const d = new Date(date);
                return d.toLocaleDateString('th-TH', { 
                    day: 'numeric', 
                    month: 'short', 
                    year: '2-digit' 
                });
            }).join(', ');
            
            roomInfo.innerHTML = `
                <h4 class="font-semibold text-teal-800">‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${booking.room}</h4>
                <p class="text-teal-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${dateText}</p>
            `;

            // Fill form with existing data
            document.getElementById('editBookingId').value = booking.id;
            document.getElementById('editGuestCount').value = booking.guests.length;
            document.getElementById('editCampus').value = booking.campus;
            document.getElementById('editFaculty').value = booking.faculty;
            document.getElementById('editPhone').value = booking.phone;
            document.getElementById('editStatus').value = booking.status;

            updateEditGuestForms();
            
            // Fill guest data
            booking.guests.forEach((guest, index) => {
                const guestIndex = index + 1;
                document.querySelector(`input[name="editGuestName${guestIndex}"]`).value = guest.name;
                document.querySelector(`input[name="editStudentId${guestIndex}"]`).value = guest.studentId;
                document.querySelector(`select[name="editGender${guestIndex}"]`).value = guest.gender;
            });

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeEditModal() {
            const modal = document.getElementById('editBookingModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function updateEditGuestForms() {
            const guestCount = parseInt(document.getElementById('editGuestCount').value);
            const container = document.getElementById('editGuestFormsContainer');
            
            container.innerHTML = '';
            
            for (let i = 1; i <= guestCount; i++) {
                const guestForm = document.createElement('div');
                guestForm.className = 'border border-gray-200 rounded-lg p-4 space-y-4';
                guestForm.innerHTML = `
                    <h5 class="font-semibold text-gray-800">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${i}</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</label>
                            <input type="text" name="editGuestName${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                            <input type="text" name="editStudentId${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏û‡∏®</label>
                            <select name="editGender${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®</option>
                                <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
                                <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(guestForm);
            }
        }

        // Handle edit booking form submission
        document.addEventListener('DOMContentLoaded', function() {
            const editBookingForm = document.getElementById('editBookingForm');
            if (editBookingForm) {
                editBookingForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const bookingId = parseInt(document.getElementById('editBookingId').value);
                    const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                    
                    if (bookingIndex === -1) {
                        alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
                        return;
                    }

                    const formData = new FormData(this);
                    const guestCount = parseInt(document.getElementById('editGuestCount').value);
                    
                    const guests = [];
                    for (let i = 1; i <= guestCount; i++) {
                        guests.push({
                            name: formData.get(`editGuestName${i}`),
                            studentId: formData.get(`editStudentId${i}`),
                            gender: formData.get(`editGender${i}`)
                        });
                    }
                    
                    // Update booking data
                    bookings[bookingIndex].guests = guests;
                    bookings[bookingIndex].campus = document.getElementById('editCampus').value;
                    bookings[bookingIndex].faculty = document.getElementById('editFaculty').value;
                    bookings[bookingIndex].phone = document.getElementById('editPhone').value;
                    bookings[bookingIndex].status = document.getElementById('editStatus').value;
                    
                    localStorage.setItem('dormBookings', JSON.stringify(bookings));
                    
                    closeEditModal();
                    updateAdminStats();
                    updateAdminBookingsTable();
                    updateMyBookings();
                    
                    alert('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
                });
            }
        });

        // Rest of the existing functions remain the same...
        function selectDate(date) {
            const allDaysCheckbox = document.getElementById('allDaysCheckbox');
            
            if (allDaysCheckbox.checked) {
                return;
            }

            const index = selectedDates.indexOf(date);
            if (index > -1) {
                selectedDates.splice(index, 1);
            } else {
                selectedDates.push(date);
            }
            
            updateCalendarSelection();
            generateRoomGrid();
        }

        function updateCalendarSelection() {
            const calendarDays = document.querySelectorAll('.calendar-day');
            const dates = ['2024-11-03', '2024-11-04', '2024-11-05'];
            
            calendarDays.forEach((day, index) => {
                if (selectedDates.includes(dates[index])) {
                    day.classList.add('bg-teal-100', 'border-teal-500');
                } else {
                    day.classList.remove('bg-teal-100', 'border-teal-500');
                }
            });
        }

        function generateRoomGrid() {
            const roomGrid = document.getElementById('roomGrid');
            const systemClosed = document.getElementById('systemClosed');
            
            if (selectedDates.length === 0) {
                roomGrid.innerHTML = '<div class="col-span-full text-center text-gray-500 py-8">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô</div>';
                return;
            }

            let availableRooms = 0;
            for (let i = 1; i <= 30; i++) {
                let isAvailable = true;
                for (const date of selectedDates) {
                    if (roomStatus[date] && roomStatus[date][i] === 'booked') {
                        isAvailable = false;
                        break;
                    }
                }
                if (isAvailable) availableRooms++;
            }

            if (availableRooms === 0) {
                systemClosed.classList.remove('hidden');
                roomGrid.innerHTML = '<div class="col-span-full text-center text-red-500 py-8">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß</div>';
                return;
            } else {
                systemClosed.classList.add('hidden');
            }

            roomGrid.innerHTML = '';
            
            for (let i = 1; i <= 30; i++) {
                const roomDiv = document.createElement('div');
                
                let isAvailable = true;
                for (const date of selectedDates) {
                    if (roomStatus[date] && roomStatus[date][i] === 'booked') {
                        isAvailable = false;
                        break;
                    }
                }
                
                if (isAvailable) {
                    roomDiv.className = 'room-available text-white p-4 rounded-lg cursor-pointer hover:opacity-80 transition-all text-center font-medium';
                    roomDiv.innerHTML = `<div>‡∏´‡πâ‡∏≠‡∏á ${i}</div><div class="text-sm">‚úÖ ‡∏ß‡πà‡∏≤‡∏á</div>`;
                    roomDiv.onclick = () => openBookingModal(i);
                } else {
                    roomDiv.className = 'room-booked text-white p-4 rounded-lg text-center font-medium opacity-75';
                    roomDiv.innerHTML = `<div>‡∏´‡πâ‡∏≠‡∏á ${i}</div><div class="text-sm">‚ùå ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>`;
                }
                
                roomGrid.appendChild(roomDiv);
            }
        }

        function openBookingModal(roomNumber) {
            selectedRoom = roomNumber;
            const modal = document.getElementById('bookingModal');
            const roomInfo = document.getElementById('selectedRoomInfo');
            
            const dateText = selectedDates.map(date => {
                const d = new Date(date);
                return d.toLocaleDateString('th-TH', { 
                    day: 'numeric', 
                    month: 'short', 
                    year: '2-digit' 
                });
            }).join(', ');
            
            const totalAmount = selectedDates.length * 600;
            
            roomInfo.innerHTML = `
                <h4 class="font-semibold text-teal-800">‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${roomNumber}</h4>
                <p class="text-teal-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${dateText}</p>
                <p class="text-teal-700">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏•‡∏∞: 600 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô</p>
                <p class="text-teal-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô: ${selectedDates.length} ‡∏Ñ‡∏∑‡∏ô</p>
                <div class="bg-teal-100 p-2 rounded mt-2">
                    <p class="font-bold text-teal-800">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // Update payment information
            document.getElementById('paymentRoomNumber').textContent = roomNumber;
            document.getElementById('paymentNights').textContent = selectedDates.length;
            document.getElementById('paymentTotalAmount').textContent = totalAmount.toLocaleString();
            
            document.getElementById('bookingForm').reset();
            document.getElementById('guestCount').value = '1';
            updateGuestForms();
        }

        function closeModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function closeDetailModal() {
            const modal = document.getElementById('detailModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function updateGuestForms() {
            const guestCount = parseInt(document.getElementById('guestCount').value);
            const container = document.getElementById('guestFormsContainer');
            
            container.innerHTML = '';
            
            for (let i = 1; i <= guestCount; i++) {
                const guestForm = document.createElement('div');
                guestForm.className = 'border border-gray-200 rounded-lg p-4 space-y-4';
                guestForm.innerHTML = `
                    <h5 class="font-semibold text-gray-800">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${i}</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</label>
                            <input type="text" name="guestName${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
                            <input type="text" name="studentId${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏û‡∏®</label>
                            <select name="gender${i}" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®</option>
                                <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
                                <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(guestForm);
            }
        }

        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const guestCount = parseInt(document.getElementById('guestCount').value);
            
            const guests = [];
            for (let i = 1; i <= guestCount; i++) {
                guests.push({
                    name: formData.get(`guestName${i}`),
                    studentId: formData.get(`studentId${i}`),
                    gender: formData.get(`gender${i}`)
                });
            }
            
            const totalAmount = selectedDates.length * 600;
            
            const booking = {
                id: Date.now(),
                room: selectedRoom,
                dates: [...selectedDates],
                guests: guests,
                campus: document.getElementById('campus').value,
                faculty: document.getElementById('faculty').value,
                phone: document.getElementById('phone').value,
                paymentSlip: document.getElementById('paymentSlip').files[0] ? URL.createObjectURL(document.getElementById('paymentSlip').files[0]) : null,
                paymentSlipName: document.getElementById('paymentSlip').files[0]?.name || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå',
                totalAmount: totalAmount,
                status: '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á',
                bookingDate: new Date().toLocaleDateString('th-TH')
            };
            
            bookings.push(booking);
            localStorage.setItem('dormBookings', JSON.stringify(bookings));
            
            selectedDates.forEach(date => {
                if (!roomStatus[date]) roomStatus[date] = {};
                roomStatus[date][selectedRoom] = 'booked';
            });
            localStorage.setItem('roomStatus', JSON.stringify(roomStatus));
            
            closeModal();
            generateRoomGrid();
            
            if (isAdminLoggedIn) {
                updateAdminStats();
                updateAdminBookingsTable();
            }
            
            alert('‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
        });

        function updateMyBookings() {
            const bookingsList = document.getElementById('bookingsList');
            
            if (bookings.length === 0) {
                bookingsList.innerHTML = '<div class="text-center text-gray-500 py-8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</div>';
                return;
            }
            
            bookingsList.innerHTML = '';
            
            bookings.forEach(booking => {
                const bookingDiv = document.createElement('div');
                bookingDiv.className = 'bg-gray-50 p-4 rounded-lg border border-gray-200';
                
                const dateText = booking.dates.map(date => {
                    const d = new Date(date);
                    return d.toLocaleDateString('th-TH', { 
                        day: 'numeric', 
                        month: 'short', 
                        year: '2-digit' 
                    });
                }).join(', ');
                
                const bookingAmount = booking.totalAmount || (booking.dates.length * 600);
                
                bookingDiv.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-semibold text-gray-800">‡∏´‡πâ‡∏≠‡∏á ${booking.room}</h4>
                            <p class="text-gray-600">‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á: ${booking.guests[0].name}</p>
                            <p class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${dateText}</p>
                            <p class="text-gray-600">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô: <span class="font-semibold text-orange-600">${bookingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span></p>
                            <p class="text-gray-600">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="${booking.status === '‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á' ? 'text-orange-600' : 'text-green-600'} font-medium">${booking.status}</span></p>
                        </div>
                        <button onclick="showBookingDetail(${booking.id})" class="px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors">
                            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                        </button>
                    </div>
                `;
                
                bookingsList.appendChild(bookingDiv);
            });
        }

        function showBookingDetail(bookingId) {
            const booking = bookings.find(b => b.id === bookingId);
            if (!booking) return;
            
            const modal = document.getElementById('detailModal');
            const content = document.getElementById('detailContent');
            
            const dateText = booking.dates.map(date => {
                const d = new Date(date);
                return d.toLocaleDateString('th-TH', { 
                    day: 'numeric', 
                    month: 'long', 
                    year: 'numeric' 
                });
            }).join(', ');
            
            let guestList = '';
            booking.guests.forEach((guest, index) => {
                guestList += `
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <h6 class="font-medium">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${index + 1}</h6>
                        <p>‡∏ä‡∏∑‡πà‡∏≠: ${guest.name}</p>
                        <p>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤: ${guest.studentId}</p>
                        <p>‡πÄ‡∏û‡∏®: ${guest.gender}</p>
                    </div>
                `;
            });
            
            const bookingAmount = booking.totalAmount || (booking.dates.length * 600);
            
            content.innerHTML = `
                <div class="space-y-4">
                    <div class="bg-teal-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-teal-800 text-lg">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h4>
                        <p><strong>‡∏´‡πâ‡∏≠‡∏á:</strong> ${booking.room}</p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</strong> ${dateText}</p>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏∑‡∏ô:</strong> ${booking.dates.length} ‡∏Ñ‡∏∑‡∏ô</p>
                        <p><strong>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏•‡∏∞:</strong> 600 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏∑‡∏ô</p>
                        <p><strong>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°:</strong> <span class="text-orange-600 font-bold text-lg">${bookingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span></p>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</strong> ${booking.guests.length} ‡∏ó‡πà‡∏≤‡∏ô</p>
                        <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong> <span class="text-green-600">${booking.status}</span></p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á:</strong> ${booking.bookingDate}</p>
                    </div>
                    
                    <div>
                        <h5 class="font-semibold text-gray-800 mb-3">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</h5>
                        <div class="space-y-2">
                            ${guestList}
                        </div>
                    </div>
                    
                    <div>
                        <h5 class="font-semibold text-gray-800 mb-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</h5>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <p><strong>‡πÄ‡∏Ç‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà/‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡πÄ‡∏Ç‡∏ï:</strong> ${booking.campus}</p>
                            <p><strong>‡∏Ñ‡∏ì‡∏∞:</strong> ${booking.faculty}</p>
                            <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> ${booking.phone}</p>
                            <p><strong>‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${booking.paymentSlipName}</p>
                            ${booking.paymentSlip ? `
                                <div class="mt-3">
                                    <p class="text-sm text-gray-600 mb-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏•‡∏¥‡∏õ:</p>
                                    <img src="${booking.paymentSlip}" alt="‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô" class="max-w-xs max-h-64 rounded-lg border cursor-pointer" onclick="showFullImage('${booking.paymentSlip}')">
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97c5197bc2bca1c3',t:'MTc1NzQwNDI3Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
